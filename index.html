<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Googology Number Generator</title>
<style>
  body { font-family: sans-serif; background:#111; color:#fff; padding:40px; }
  .card { background:#222; padding:20px; border-radius:15px; max-width:800px; margin:auto; }
  input { width:100%; padding:12px; font-size:1.2rem; border-radius:10px; border:none; margin-top:10px; }
  pre { background:#000; padding:15px; border-radius:10px; margin-top:20px; }
</style>
</head>
<body>

<h1>Googology Number Generator</h1>

<div class="card">
  <input id="expr" placeholder="Enter expression: 10^^^^477, 3↑↑4, 1/47">
  <pre id="out"></pre>
</div>

<script>
// Knuth arrow recursion
function knuth(a, arrows, b) {
  a = BigInt(a);
  b = BigInt(b);

  if (arrows === 1) return a ** b;
  if (b === 0n) return 1n;

  let result = a;
  for (let i = 1n; i < b; i++) {
    result = knuth(result, arrows - 1, a);
  }
  return result;
}

function evaluateExpression(expr) {
  expr = expr.replace(/\s+/g, '');

  // Fractions like 1/47
  if (/^\d+\/\d+$/.test(expr)) {
    let [n, d] = expr.split('/').map(Number);
    return (n / d).toString();
  }

  // Convert ↑ to ^
  expr = expr.replace(/↑/g, '^');

  // Knuth arrows ^^^...
  const match = expr.match(/^(\d+)(\^{2,})(\d+)$/);
  if (match) {
    let base = Number(match[1]);
    let arrows = match[2].length;
    let height = Number(match[3]);
    return knuth(base, arrows, height).toString();
  }

  // Basic exponent like 2^1000
  const exp = expr.match(/^(\d+)\^(\d+)$/);
  if (exp) {
    return (BigInt(exp[1]) ** BigInt(exp[2])).toString();
  }

  return "";
}

// Auto-eval when typing
document.getElementById("expr").addEventListener("input", () => {
  const expr = document.getElementById("expr").value;
  document.getElementById("out").textContent = evaluateExpression(expr);
});
</script>

</body>
</html>
